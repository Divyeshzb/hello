const { artillery } = require('artillery');

module.exports = {
  config: {
    target: 'ROOST_SVC_URL',
    phases: [
      {
        duration: 10,
        arrivalRate: 1
      }
    ]
  },
  scenarios: [
    {
      name: 'Test API endpoint',
      flow: [
        {
          get: {
            url: '/',
            headers: {
              'Content-Type': 'application/json'
            }
          }
        }
      ]
    }
  ],
  assert: {
    'status code is 201': (response, done) => {
      if (response.statusCode === 201) {
        done();
      } else {
        done(new Error(`Expected status code 201 but received ${response.statusCode}`));
      }
    }
  }
};